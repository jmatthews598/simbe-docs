---
title: 'Out on Shelf'
description: 'Learn about Feedback Loops for Out on Shelf detections and how the system tracks product-level detection accuracy with automated confidence management'
---

## What It Does & Benefits

Feedback Loops for Out on Shelf improves detection accuracy by automatically managing which products should be reported to customers. The system tracks product-level detection accuracy and only reports high-confidence detections, building stronger trust in shelf availability insights.

### Key Benefits

- **Accelerated Store Onboarding**: New stores can go live faster with intelligent audit routing
- **Improved Detection Accuracy**: Only high-confidence detections reach customer reporting
- **Automated Scene Approval**: Replaces manual review process during store calibration
- **Faster CV Improvements**: Direct connection between user feedback and model retraining

## How It Works Behind the Scenes

### Confidence Status System

The system assigns each product a confidence status that determines reporting and audit routing:

<AccordionGroup>
<Accordion title="CONFIDENT">
  **Criteria**: 3+ accurate predictions out of the last 5 audits
  
  **Behavior**: Product detections bypass audit and go directly to reporting
</Accordion>

<Accordion title="REVIEW">
  **Criteria**: Not enough audits, or no consistent pattern
  
  **Behavior**: Product is always audited, is_out_on_shelf set to null in reporting
</Accordion>

<Accordion title="LOW_PRECISION">
  **Criteria**: 3+ false positives (CV said OOS, but audit found it was actually on shelf)
  
  **Behavior**: Product is always audited, is_out_on_shelf set to null in reporting
</Accordion>

<Accordion title="LOW_RECALL">
  **Criteria**: 3+ false negatives (CV missed an OOS, audit added it)
  
  **Behavior**: Product is always audited to ensure we don't miss detections
</Accordion>
</AccordionGroup>

### Workflow Process

1. **Detection Evaluation**: Each product detection is evaluated against its current confidence status
2. **Confident Products**: Automatically bypass audit and go directly to reporting
3. **Low-Confidence Products**: Routed to ADB audit queue for human review
4. **Status Updates**: After audit, product statuses are re-evaluated based on the last 5 audit outcomes
5. **Reporting Suppression**: Products with LOW_PRECISION or REVIEW status have their is_out_on_shelf value set to null

### User Feedback Integration

When store teams report false positives:
- The system automatically updates the product's confidence status (CONFIDENT → REVIEW)
- This triggers ADB audit queues for products requiring review
- Once ADB audits enough samples, the system re-evaluates confidence status
- CV team can access confidence statuses and job context through API endpoints for model retraining

### Onboarding Options

- **With PEM_OOS_REVIEW_BY_DEFAULT**: Every new product starts as REVIEW status, requiring ADB audit before reporting
- **Without PEM_OOS_REVIEW_BY_DEFAULT**: Every product defaults to CONFIDENT status (desired for proven grocery formats)

## How to Enable

### Required Services

<CardGroup>
<Card title="PEM_OOS_REVIEW_BY_DEFAULT" icon="settings">
  **Optional**: Initializes every new product to REVIEW status, suppressing it from reporting until proven accurate
</Card>

<Card title="PEM_AUTO_AUDIT" icon="automation">
  Controls queuing jobs for ADB to audit based on product confidence statuses
</Card>

<Card title="PEM_PRODUCTION" icon="database">
  References confidence status and sets is_out_on_shelf to null for low-confidence products
</Card>
</CardGroup>

### Implementation Steps

1. **Enable Services**: Add the required PEM services to your store configuration
2. **Choose Onboarding Strategy**: Decide whether to default new products to REVIEW status
3. **Train Teams**: Ensure store teams understand how to flag false positives
4. **Monitor Performance**: Track confidence metrics and audit queue sizes

### Monitoring

<Card title="Key Metrics" icon="chart">
  - **% of Products Confident**: Share of store products that have reached confident status
  - **Audit Efficiency**: Time spent auditing vs. total detections processed
  - **ADB Audit Queue Size**: Number of jobs queued for review
</Card>

[← Back to Feedback Loops Overview](/internal/services/feedback-loops/overview)
